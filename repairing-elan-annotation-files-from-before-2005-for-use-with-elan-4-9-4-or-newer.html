<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<title>Damir  Cavar | Repairing ELAN annotation files from before 2005 for use with ELAN 4.9.4 or newer</title>
<meta name="description" content="Associate Professor of Computational Linguistics / Natural Language Processing.
">

<!-- Open Graph -->


<!-- Bootstrap & MDB -->
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet" integrity="sha512-MoRNloxbStBcD8z3M/2BmnT+rg4IsMxPkXaGh2zD6LGNNFE80W3onsAhRcMAMrSoyWL9xD7Ert0men7vR8LUZg==" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/css/mdb.min.css" integrity="sha512-RO38pBRxYH3SoOprtPTD86JFOclM51/XTIdEPh5j8sj4tp8jmQIx26twG52UaLi//hQldfrh7e51WzP9wuP32Q==" crossorigin="anonymous" />

<!-- Fonts & Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css"  integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.9.0/css/academicons.min.css" integrity="sha512-W4yqoT1+8NLkinBLBZko+dFB2ZbHsYLDdr50VElllRcNt2Q4/GSs6u71UHKxB7S6JEMCp5Ve4xjh3eGQl/HRvg==" crossorigin="anonymous">
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons">

<!-- Code Syntax Highlighting -->
<link rel="stylesheet" href="https://gitcdn.xyz/repo/jwarby/jekyll-pygments-themes/master/github.css" />

<!-- Styles -->

<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>favicon.ico</text></svg>">

<link rel="stylesheet" href="/assets/css/main.css">

<link rel="canonical" href="/repairing-elan-annotation-files-from-before-2005-for-use-with-elan-4-9-4-or-newer">

<!-- JQuery -->
<!-- jQuery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>


<!-- Theming-->

  <script src="/assets/js/theme.js"></script>
  <!-- Load DarkMode JS -->
<script src="/assets/js/dark_mode.js"></script>






    
<!-- MathJax -->
<script type="text/javascript">
  window.MathJax = {
    tex: {
      tags: 'ams'
    }
  };
</script>
<script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.1.2/es5/tex-mml-chtml.js"></script>
<script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>


  </head>

  <body class="fixed-top-nav ">

    <!-- Header -->

    <header>

    <!-- Nav Bar -->
    <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top">
    <div class="container">
      
      <a class="navbar-brand title font-weight-lighter" href="http://damir.cavar.me//">
       <span class="font-weight-bold">Damir</span>   Cavar
      </a>
      
      <!-- Navbar Toggle -->
      <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar top-bar"></span>
        <span class="icon-bar middle-bar"></span>
        <span class="icon-bar bottom-bar"></span>
      </button>
      <div class="collapse navbar-collapse text-right" id="navbarNav">
        <ul class="navbar-nav ml-auto flex-nowrap">
          <!-- About -->
          <li class="nav-item ">
            <a class="nav-link" href="/">
              about
              
            </a>
          </li>
          
          <!-- Blog -->
          <li class="nav-item ">
            <a class="nav-link" href="/blog/">
              blog
              
            </a>
          </li>
          
          <!-- Other pages -->
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          <li class="nav-item ">
              <a class="nav-link" href="/projects/">
                projects
                
              </a>
          </li>
          
          
          
          <li class="nav-item ">
              <a class="nav-link" href="/publications/">
                publications
                
              </a>
          </li>
          
          
          
          <li class="nav-item ">
              <a class="nav-link" href="/teaching/">
                teaching
                
              </a>
          </li>
          
          
          
            <div class = "toggle-container">
              <a id = "light-toggle">
                  <i class="fas fa-moon"></i>
                  <i class="fas fa-sun"></i>
              </a>
            </div>
          
        </ul>
      </div>
    </div>
  </nav>

</header>


    <!-- Content -->

    <div class="container mt-5">
      

<div class="post">

  <header class="post-header">
    <h1 class="post-title">Repairing ELAN annotation files from before 2005 for use with ELAN 4.9.4 or newer</h1>
    <p class="post-meta">August 8, 2016 • Damir Cavar</p>
  </header>

  <article class="post-content">
    <p><a href="https://tla.mpi.nl/tools/tla-tools/elan/" title="ELAN">ELAN</a> 4.9.4 has issues with older versions of <a href="https://tla.mpi.nl/tools/tla-tools/elan/" title="ELAN">ELAN</a> Annotation Files (EAFs).</p>

<p>We noticed that <a href="https://tla.mpi.nl/tools/tla-tools/elan/" title="ELAN">ELAN</a> annotation files (EAFs) from 2004 and earlier would not open in <a href="https://tla.mpi.nl/tools/tla-tools/elan/" title="ELAN">ELAN</a> 4.9.4, the most recent
version of it. The problem is somewhat serious in that it does not alert one or show the reason for not showing any
tiers or annotations. <a href="https://tla.mpi.nl/tools/tla-tools/elan/" title="ELAN">ELAN</a> 4.9.4 would open the files without any specific notification and just showing an empty
tiers and media section.</p>

<p>Han Sloetjes informed me that <a href="https://tla.mpi.nl/tools/tla-tools/elan/" title="ELAN">ELAN</a> has a log dialog under <em>View &gt; View Log…</em>. We identified the issue to be a
missing attribute in the older EAF XML. The old XML root tag looks like this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;ANNOTATION_DOCUMENT AUTHOR="Jarrod Slocum"
DATE="2004.03.02 13:56 CST"
FORMAT="2.0" VERSION="2.0"
xsi:noNamespaceSchemaLocation="http://www.mpi.nl/tools/elan/EAFv2.0.xsd"&gt;
</code></pre></div></div>

<p>This root tag is missing one important attribute that the newer <a href="https://tla.mpi.nl/tools/tla-tools/elan/" title="ELAN">ELAN</a> XML-parser requires. Han sent me this change
suggestion:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;ANNOTATION_DOCUMENT AUTHOR="Jarrod Slocum" DATE="2004.03.02 13:56 CST"
 FORMAT="2.0" VERSION="2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:noNamespaceSchemaLocation="http://www.mpi.nl/tools/elan/EAFv2.0.xsd"&gt;
</code></pre></div></div>

<p>This adds the attribute:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
</code></pre></div></div>

<p>The issue with this problem is that many linguists working on <a href="https://tla.mpi.nl/tools/tla-tools/elan/" title="ELAN">ELAN</a> annotations and opening older EAFs will
potentially get confused and might assume that they lost the data and start writing over the old EAFs and really
lose the previous data and work. Please be aware of this issue and if you have archived EAFs from 2005 or earlier,
you might have to correct the EAF XML to be able to view and edit it in the most recent <a href="https://tla.mpi.nl/tools/tla-tools/elan/" title="ELAN">ELAN</a>.</p>

<p>I told Han that it might be a good idea to include the code in new <a href="https://tla.mpi.nl/tools/tla-tools/elan/" title="ELAN">ELAN</a> releases to correct this error
automatically, since many archived files might be affected by this issue.</p>

<p>If you have a lot of older <a href="https://tla.mpi.nl/tools/tla-tools/elan/" title="ELAN">ELAN</a> files with this issue, here is a script or set of commands that will add this
attribute to the XML. You will need some version of Python 3.x to run this script. If you run this in an Unix
environment (Mac OS X, Linux, Windows 10 with Linux Subsystem and Bash), you will also need <em>find</em>. This script
will create a backup-copy of all EAFs that are repaired. I strongly recommend that you create your own backup copy
and verify that the repaired EAFs can be opened with the newer versions of <a href="https://tla.mpi.nl/tools/tla-tools/elan/" title="ELAN">ELAN</a>.</p>

<p>To repair all EAFs in the local folder, assuming that the script <a href="/Software/elanrepair.zip">elanrepair.py</a> is executable:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./elanrepair.py *.eaf
</code></pre></div></div>

<p>Download the script <a href="/Software/elanrepair.zip">elanrepair.py</a> in the ZIP-file <a href="/Software/elanrepair.zip">elanrepair.zip</a>.</p>

<p>If the you cannot run the script directly, use the Python 3 interpreter to run it:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python3  ./elanrepair.py *.eaf
</code></pre></div></div>

<p>If you want to recurse through a larger set of sub-folders in a bash-command line try:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>find . -name "*.eaf" -type f -exec ./elanrepair.py {} \;
</code></pre></div></div>

<p>Let me know, if there are any issues with that.</p>

<p>Damir</p>


  </article>

  

</div>

    </div>

    <!-- Footer -->

    
<footer class="fixed-bottom">
  <div class="container mt-0">
    &copy; Copyright 2021 Damir  Cavar.
    Powered by <a href="http://jekyllrb.com/" target="_blank">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank">Unsplash</a>.

    
    
    Last updated: April 11, 2021.
    
  </div>
</footer>



  </body>

  <!-- Bootsrap & MDB scripts -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.4.4/umd/popper.min.js" integrity="sha512-eUQ9hGdLjBjY3F41CScH3UX+4JDSI9zXeroz7hJ+RteoCaY+GP/LDoM8AO+Pt+DRFw3nXqsjh9Zsts8hnYv8/A==" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha512-M5KW3ztuIICmVIhjSqXe01oV2bpe248gOxqmlcYrEzAvws7Pw3z6BK0iGbrwvdrUQUhi3eXgtxp5I8PDo9YfjQ==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/js/mdb.min.js" integrity="sha512-Mug9KHKmroQFMLm93zGrjhibM2z2Obg9l6qFG2qKjXEXkMp/VDkI4uju9m4QKPjWSwQ6O2qzZEnJDEeCw0Blcw==" crossorigin="anonymous"></script>

  
<!-- Mansory & imagesLoaded -->
<script defer src="https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js"></script>
<script defer src="https://unpkg.com/imagesloaded@4/imagesloaded.pkgd.min.js"></script>
<script defer src="/assets/js/mansory.js" type="text/javascript"></script>


  


<!-- Load Common JS -->
<script src="/assets/js/common.js"></script>


</html>
